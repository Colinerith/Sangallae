# 산갈래 : 등산 측정 및 등산로 추천 어플리케이션
## 개요
 ### 1. 주제 선정 배경  
 COVID-19로 인해 실내 운동이 제한됨에 따라 도심과 인접한 산을 찾는 등산객들의 수가
증가하고 있다. 초보 등산객들의 경우, 길을 잘못 들거나 등산로의 난이도를 잘 모르고
가벼운 차림으로 등산을 하다가 사고가 발생하는 경우가 많다. 또한 자신에게 맞는 수준의
등산로 정보를 구하기가 어렵다. 본 프로그램은 유저들에게 맞춤형으로 등산로를 추천하고
본인의 등산 데이터를 관리할 수 있는 서비스를 제공해주는 어플리케이션을 개발해 보다 더
안전하고 즐겁게 등산을 즐길 수 있도록 주제를 선정했다.
 ### 2. 목적  
 등산로 추천 및 측정 어플리케이션으로 유저의 수준에 적합한 난이도의 등산로를
추천해주고, 산행 중에 길을 잃지 않도록 GPS 정보를 통해 경로를 안내한다. 원하는 길이와
수준의 경로를 검색할 수도 있고, 유저의 등산 데이터를 수집해 유저의 취향에 맞는
등산로를 추천해 준다.

## 기능
  ### 1. 주요 기능  
  1) 등산로/산 추천  
  유저의 등산 기록과 등산로들의 메타데이터를 분석해 유저의 수준에 적합하고 취향에 맞는 등산로를 추천한다. 또한, 최근 24개월 이내에 따라가기 횟수가 많은 인기 등산로, 현재 계절의 순위를 반영한 인기 산 목록, 현재 유저의 위치로 부터 50km 이내에 있는 근처 산 목록을 제공한다.  
  2) 키워드 검색  
  등산로명, 산 이름, 지역 명 등의 키워드로 검색을 하면 해당 키워드가 포함된 등산로 목록을 보여준다.  
  3) 등산로 안내 및 측정  
 등산로 상세 페이지에서 따라가기 버튼을 클릭하면, 해당 등산로의 경로를 지도에 표시한다. 안내 시작 버튼을 클릭하면 측정 시간, 걸은 시간, 이동한 거리, 남은 거리, 현재 고도, 예상 도착 시간, 진행률을 화면에 표시한다. 3초 간격으로 현재 유저가 위치한 곳의 위도, 경도, 고도와 시간을 기록한다. 일시정지 버튼을 클릭하면 등산 안내 및 측정을 일시적으로 중단할 수 있다. 등산 측정이 끝나면 해당 등산 데이터는 GPX 파일로 생성되고, 로컬 저장소 및 서버 스토리지에 저장되어 유저가 언제든지 본인의 등산 기록을 확인할 수 있다.  
  4) 마이페이지, 등산 통계  
  닉네임, 키, 몸무게 등 유저의 프로필을 직접 수정할 수 있고, 유저의 등산 통계 및 등산 기록 목록을 확인할 수 있다. 등산 통계 화면에서는 등산 거리, 등산 시간, 이동 시간, 오르막합, 내리막합, 속력, 페이스 등의 합계, 평균, 최고 기록을 제공하여, 유저의 등산 성향을 파악할 수 있다.  
  
## 데이터 수집 및 가공
### 1. 데이터 특성
GPX는 일정한 간격으로 위도, 경도, 고도, 측정 시각이 적힌 xml 형태의 파일로써 GPS 데이터의 집합이다. GPX 파일에 기록된 위도, 경도 리스트를 지도에 표시해 경로 안내를 할 수 있고, 해당 등산로의 전체 길이를 구할 수 있다. 또한, 기록된 시간 정보를 이용해 전체 시간, 이동 시간, 평균 속력 등을 계산하고, 고도를 이용해 오르막합, 내리막합, 고도 차 등을 계산하여 사용자에게 해당 등산로의 특성 및 난이도 정보를 제공할 수 있다.   
![image](https://user-images.githubusercontent.com/75845861/135603040-f15ff016-f4bf-4d7a-988f-ea4c0a1f3640.png)

### 2. 데이터 수집
등산 커뮤니티 ‘에브리트레일’ (http://www.everytrail.co.kr) 에서 9060개의 GPX 파일을 크롤링했다. 언어는 Python을 사용했고, 라이브러리는 BeautifulSoup와 Selenium을 사용했다. 수집한 GPX 파일들로부터 메타데이터와 썸네일을 추출해, 썸네일과 GPX 파일은 S3 스토리지에, 메타데이터는 데이터베이스에 저장했다.   
![image](https://user-images.githubusercontent.com/75845861/135603140-0d3e0af6-7ba1-4d47-a6a0-e9e36662e943.png)

### 3. 데이터 가공
1) 메타데이터 추출
크롤링한 gpx 데이터들로부터 ‘거리, 이동시간, 소요시간, 평균 속도, 평균 페이스, 위도, 경도, 주소, 최고 고도, 최소 고도, 고도차, 오르막합, 내리막합, 난이도, 기록 시각, 썸네일’ 메타데이터를 추출했다. 메타데이터 추출은 파이썬의 gpxpy 라이브러리를 사용했으며, 썸네일 생성은 Thunderforest API를 사용하여 등산로 경로가 그려진 썸네일을 생성했다. 아래 표는 각 속성 값들을 계산한 방법을 설명하고 있다.

|속성|계산 방법|
|------|---|
|테스트1|테스트2|
|테스트1|테스트2|

2) 

## 설계
## 파일 설명


> Platform: Android
Server Framework: SpringBoot 2.4.4
Web server: Nginx
WAS: Django 3.1.7
Database: Mariadb 10.4.13
Cloud Storage: AWS S3
Cloud Server Hosting: AWS EC2
Cloud Database: AWS RDS
